{#
  Article Card Component

  Displays a single article with summary, scores, and links.

  Variables:
  - article: ScoredArticle object with article, relevance, and scores

  Accessibility:
  - Semantic <article> element
  - ARIA labels for collapsible sections
  - External link indicators
  - Color contrast meeting WCAG AA

  Mobile:
  - Touch-friendly links (min 48px)
  - Readable font sizes (16px+)
  - Responsive flex layout
#}
<article class="bg-white rounded-lg shadow-md p-4 sm:p-6 hover:shadow-lg transition-shadow duration-200">
  {# Header #}
  <header class="mb-4">
    <h2 class="text-lg sm:text-xl font-semibold text-gray-900 mb-2 leading-tight">
      <a
        href="{{ article.article.article.url or article.article.article.hn_url }}"
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded">
        {{ article.title }}
      </a>
    </h2>

    {# Metadata #}
    <div class="flex flex-wrap items-center gap-3 text-sm text-gray-600">
      <span class="flex items-center gap-1">
        <svg class="w-4 h-4 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
        </svg>
        <span>{{ article.article.article.hn_score }} points</span>
      </span>

      <a
        href="{{ article.article.article.hn_url }}"
        target="_blank"
        rel="noopener noreferrer"
        class="hover:text-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 rounded min-h-[44px] flex items-center">
        HN Discussion →
      </a>
    </div>
  </header>

  {# Summary #}
  {% if article.article.display_summary %}
  <div class="mb-4">
    <p class="text-gray-700 leading-relaxed text-base">
      {{ article.article.display_summary }}
    </p>
  </div>
  {% endif %}

  {# Key Points #}
  {% if article.article.display_key_points %}
  <div class="mb-4">
    <h3 class="text-sm font-semibold text-gray-900 mb-2">Key Points</h3>
    <ul class="list-disc list-inside space-y-1 text-sm text-gray-700">
      {% for point in article.article.display_key_points %}
      <li class="leading-relaxed">{{ point }}</li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  {# Tech Tags #}
  {% if article.article.display_tags %}
  <div class="mb-4">
    <div class="flex flex-wrap gap-2" role="list" aria-label="Technology tags">
      {% for tag in article.article.display_tags %}
      <span class="px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs" role="listitem">
        {{ tag }}
      </span>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  {# Scores and Reason Toggle #}
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between pt-4 border-t border-gray-200 gap-3">
    {# Scores #}
    <div class="flex flex-wrap items-center gap-3 sm:gap-4 text-sm">
      <div class="flex items-center gap-1">
        <span class="font-medium text-gray-700">Relevance:</span>
        <span class="font-semibold {% if article.relevance_score >= 0.7 %}text-green-600{% elif article.relevance_score >= 0.5 %}text-blue-600{% else %}text-yellow-600{% endif %}">
          {{ "%.0f"|format(article.relevance_score * 100) }}%
        </span>
      </div>

      <div class="flex items-center gap-1">
        <span class="font-medium text-gray-700">Final Score:</span>
        <span class="font-semibold {% if article.final_score >= 0.7 %}text-green-600{% elif article.final_score >= 0.5 %}text-blue-600{% else %}text-yellow-600{% endif %}">
          {{ "%.0f"|format(article.final_score * 100) }}%
        </span>
      </div>
    </div>

    {# Reason Toggle Button #}
    <button
      type="button"
      onclick="toggleReason({{ article.story_id }})"
      class="text-sm text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 rounded px-2 py-1 min-h-[44px] sm:min-h-0 text-left sm:text-center"
      aria-expanded="false"
      aria-controls="reason-{{ article.story_id }}">
      Why relevant? ↓
    </button>
  </div>

  {# Relevance Reason (Collapsible) #}
  <div
    id="reason-{{ article.story_id }}"
    class="hidden mt-3 p-3 bg-blue-50 rounded text-sm text-gray-700 leading-relaxed"
    aria-hidden="true">
    {{ article.relevance_reason }}
  </div>
</article>
